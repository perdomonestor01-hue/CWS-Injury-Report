<!-- Reports Header with Controls -->
<div class="flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8">
    <div>
        <h1 class="text-3xl font-bold text-gray-800 mb-2">Business Reports</h1>
        <p class="text-gray-600">Comprehensive reporting suite for property management and financial analysis</p>
    </div>
    <div class="mt-4 lg:mt-0 flex items-center space-x-4">
        <div class="flex items-center space-x-2">
            <label class="text-sm font-medium text-gray-700">Report Period:</label>
            <select id="reportPeriod" class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                <option value="current">Current Month</option>
                <option value="ytd" selected>Year to Date</option>
                <option value="last12">Last 12 Months</option>
                <option value="custom">Custom Range</option>
            </select>
        </div>
        <button onclick="scheduleReport()" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm">
            <i class="fas fa-clock mr-2"></i>Schedule
        </button>
        <button onclick="exportAllReports()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm">
            <i class="fas fa-download mr-2"></i>Export All
        </button>
    </div>
</div>

<!-- Quick Report Actions -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
    <div class="bg-white rounded-lg shadow-sm p-6 card-hover cursor-pointer" onclick="generateReport('financial')">
        <div class="flex items-center justify-between">
            <div>
                <h3 class="text-lg font-semibold text-gray-800">Financial Report</h3>
                <p class="text-sm text-gray-600 mt-1">P&L, Cash Flow, Balance Sheet</p>
                <button class="mt-3 text-blue-600 hover:text-blue-800 text-sm font-medium">
                    Generate Report <i class="fas fa-arrow-right ml-1"></i>
                </button>
            </div>
            <div class="bg-green-100 p-3 rounded-full">
                <i class="fas fa-chart-line text-green-600 text-xl"></i>
            </div>
        </div>
    </div>

    <div class="bg-white rounded-lg shadow-sm p-6 card-hover cursor-pointer" onclick="generateReport('manager')">
        <div class="flex items-center justify-between">
            <div>
                <h3 class="text-lg font-semibold text-gray-800">Manager Performance</h3>
                <p class="text-sm text-gray-600 mt-1">Performance metrics & rankings</p>
                <button class="mt-3 text-blue-600 hover:text-blue-800 text-sm font-medium">
                    Generate Report <i class="fas fa-arrow-right ml-1"></i>
                </button>
            </div>
            <div class="bg-blue-100 p-3 rounded-full">
                <i class="fas fa-users text-blue-600 text-xl"></i>
            </div>
        </div>
    </div>

    <div class="bg-white rounded-lg shadow-sm p-6 card-hover cursor-pointer" onclick="generateReport('tax')">
        <div class="flex items-center justify-between">
            <div>
                <h3 class="text-lg font-semibold text-gray-800">Tax Preparation</h3>
                <p class="text-sm text-gray-600 mt-1">Schedule E, depreciation, deductions</p>
                <button class="mt-3 text-blue-600 hover:text-blue-800 text-sm font-medium">
                    Generate Report <i class="fas fa-arrow-right ml-1"></i>
                </button>
            </div>
            <div class="bg-purple-100 p-3 rounded-full">
                <i class="fas fa-calculator text-purple-600 text-xl"></i>
            </div>
        </div>
    </div>

    <div class="bg-white rounded-lg shadow-sm p-6 card-hover cursor-pointer" onclick="generateReport('maintenance')">
        <div class="flex items-center justify-between">
            <div>
                <h3 class="text-lg font-semibold text-gray-800">Maintenance Summary</h3>
                <p class="text-sm text-gray-600 mt-1">Costs, trends, recommendations</p>
                <button class="mt-3 text-blue-600 hover:text-blue-800 text-sm font-medium">
                    Generate Report <i class="fas fa-arrow-right ml-1"></i>
                </button>
            </div>
            <div class="bg-orange-100 p-3 rounded-full">
                <i class="fas fa-wrench text-orange-600 text-xl"></i>
            </div>
        </div>
    </div>
</div>

<!-- Report Generation Interface -->
<div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
    <!-- Report Selection & Configuration -->
    <div class="lg:col-span-1">
        <div class="bg-white rounded-lg shadow-sm p-6">
            <h3 class="text-xl font-semibold text-gray-800 mb-6">
                <i class="fas fa-cog text-gray-500 mr-2"></i>
                Report Configuration
            </h3>

            <div class="space-y-6">
                <!-- Report Type Selection -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Report Type</label>
                    <select id="reportTypeSelect" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm">
                        <option value="portfolio">Portfolio Overview</option>
                        <option value="financial">Monthly Financial</option>
                        <option value="manager">Manager Performance</option>
                        <option value="property">Property Performance</option>
                        <option value="expense">Expense Analysis</option>
                        <option value="tax">Tax Preparation</option>
                        <option value="maintenance">Maintenance Summary</option>
                        <option value="tenant">Tenant Satisfaction</option>
                        <option value="custom">Custom Report</option>
                    </select>
                </div>

                <!-- Date Range -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Date Range</label>
                    <div class="grid grid-cols-2 gap-2">
                        <input type="date" id="startDate" class="border border-gray-300 rounded-lg px-3 py-2 text-sm"
                               value="{{currentDate}}">
                        <input type="date" id="endDate" class="border border-gray-300 rounded-lg px-3 py-2 text-sm"
                               value="{{currentDate}}">
                    </div>
                </div>

                <!-- Property Filter -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Properties</label>
                    <select id="propertyFilter" multiple class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm h-24">
                        <option value="all" selected>All Properties</option>
                        {{#each properties}}
                        <option value="{{id}}">{{address}}</option>
                        {{/each}}
                    </select>
                </div>

                <!-- Manager Filter -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Managers</label>
                    <select id="managerFilter" multiple class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm h-20">
                        <option value="all" selected>All Managers</option>
                        {{#each managers}}
                        <option value="{{name}}">{{name}}</option>
                        {{/each}}
                    </select>
                </div>

                <!-- Export Format -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Export Format</label>
                    <div class="flex space-x-2">
                        <label class="flex items-center">
                            <input type="radio" name="exportFormat" value="pdf" checked class="mr-2">
                            <span class="text-sm">PDF</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="exportFormat" value="excel" class="mr-2">
                            <span class="text-sm">Excel</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="exportFormat" value="csv" class="mr-2">
                            <span class="text-sm">CSV</span>
                        </label>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="space-y-2">
                    <button onclick="generateCustomReport()" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg">
                        <i class="fas fa-play mr-2"></i>Generate Report
                    </button>
                    <button onclick="previewReport()" class="w-full bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded-lg">
                        <i class="fas fa-eye mr-2"></i>Preview
                    </button>
                    <button onclick="saveTemplate()" class="w-full bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-lg">
                        <i class="fas fa-save mr-2"></i>Save Template
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Report Preview Area -->
    <div class="lg:col-span-2">
        <div class="bg-white rounded-lg shadow-sm p-6">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-xl font-semibold text-gray-800">
                    <i class="fas fa-file-alt text-gray-500 mr-2"></i>
                    Report Preview
                </h3>
                <div class="flex items-center space-x-2">
                    <button onclick="downloadReport()" class="text-blue-600 hover:text-blue-800 text-sm">
                        <i class="fas fa-download mr-1"></i>Download
                    </button>
                    <button onclick="shareReport()" class="text-green-600 hover:text-green-800 text-sm">
                        <i class="fas fa-share mr-1"></i>Share
                    </button>
                    <button onclick="printReport()" class="text-gray-600 hover:text-gray-800 text-sm">
                        <i class="fas fa-print mr-1"></i>Print
                    </button>
                </div>
            </div>

            <div id="reportPreview" class="min-h-96 border-2 border-dashed border-gray-300 rounded-lg p-8 text-center text-gray-500">
                <i class="fas fa-file-alt text-4xl mb-4"></i>
                <p class="text-lg mb-2">No report generated</p>
                <p class="text-sm">Select report type and click "Generate Report" or "Preview" to see content here</p>
            </div>
        </div>
    </div>
</div>

<!-- Report Templates Library -->
<div class="bg-white rounded-lg shadow-sm p-6 mb-8">
    <div class="flex items-center justify-between mb-6">
        <h3 class="text-xl font-semibold text-gray-800">
            <i class="fas fa-folder text-blue-500 mr-2"></i>
            Report Templates Library
        </h3>
        <button onclick="createNewTemplate()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm">
            <i class="fas fa-plus mr-2"></i>New Template
        </button>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Monthly Financial Template -->
        <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition cursor-pointer" onclick="loadTemplate('monthly-financial')">
            <div class="flex items-center justify-between mb-3">
                <h4 class="font-medium text-gray-800">Monthly Financial Report</h4>
                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">Active</span>
            </div>
            <p class="text-sm text-gray-600 mb-3">Comprehensive monthly P&L, cash flow, and key metrics</p>
            <div class="flex items-center justify-between text-xs text-gray-500">
                <span>Last used: Today</span>
                <div class="flex space-x-2">
                    <button onclick="editTemplate('monthly-financial')" class="text-blue-600 hover:text-blue-800">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button onclick="duplicateTemplate('monthly-financial')" class="text-gray-600 hover:text-gray-800">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Manager Performance Template -->
        <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition cursor-pointer" onclick="loadTemplate('manager-performance')">
            <div class="flex items-center justify-between mb-3">
                <h4 class="font-medium text-gray-800">Manager Performance</h4>
                <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">Standard</span>
            </div>
            <p class="text-sm text-gray-600 mb-3">Individual and comparative manager performance metrics</p>
            <div class="flex items-center justify-between text-xs text-gray-500">
                <span>Last used: 2 days ago</span>
                <div class="flex space-x-2">
                    <button onclick="editTemplate('manager-performance')" class="text-blue-600 hover:text-blue-800">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button onclick="duplicateTemplate('manager-performance')" class="text-gray-600 hover:text-gray-800">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Tax Preparation Template -->
        <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition cursor-pointer" onclick="loadTemplate('tax-prep')">
            <div class="flex items-center justify-between mb-3">
                <h4 class="font-medium text-gray-800">Tax Preparation</h4>
                <span class="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded">Annual</span>
            </div>
            <p class="text-sm text-gray-600 mb-3">Schedule E ready data with depreciation and deductions</p>
            <div class="flex items-center justify-between text-xs text-gray-500">
                <span>Last used: Last month</span>
                <div class="flex space-x-2">
                    <button onclick="editTemplate('tax-prep')" class="text-blue-600 hover:text-blue-800">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button onclick="duplicateTemplate('tax-prep')" class="text-gray-600 hover:text-gray-800">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Portfolio Summary Template -->
        <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition cursor-pointer" onclick="loadTemplate('portfolio-summary')">
            <div class="flex items-center justify-between mb-3">
                <h4 class="font-medium text-gray-800">Portfolio Summary</h4>
                <span class="text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded">Executive</span>
            </div>
            <p class="text-sm text-gray-600 mb-3">High-level overview for executives and investors</p>
            <div class="flex items-center justify-between text-xs text-gray-500">
                <span>Last used: 1 week ago</span>
                <div class="flex space-x-2">
                    <button onclick="editTemplate('portfolio-summary')" class="text-blue-600 hover:text-blue-800">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button onclick="duplicateTemplate('portfolio-summary')" class="text-gray-600 hover:text-gray-800">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Maintenance Report Template -->
        <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition cursor-pointer" onclick="loadTemplate('maintenance-report')">
            <div class="flex items-center justify-between mb-3">
                <h4 class="font-medium text-gray-800">Maintenance Report</h4>
                <span class="text-xs bg-red-100 text-red-800 px-2 py-1 rounded">Operational</span>
            </div>
            <p class="text-sm text-gray-600 mb-3">Detailed maintenance costs and property condition analysis</p>
            <div class="flex items-center justify-between text-xs text-gray-500">
                <span>Last used: 3 days ago</span>
                <div class="flex space-x-2">
                    <button onclick="editTemplate('maintenance-report')" class="text-blue-600 hover:text-blue-800">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button onclick="duplicateTemplate('maintenance-report')" class="text-gray-600 hover:text-gray-800">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Custom Template Slot -->
        <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 hover:border-blue-400 transition cursor-pointer text-center" onclick="createNewTemplate()">
            <div class="text-gray-400 mb-3">
                <i class="fas fa-plus text-2xl"></i>
            </div>
            <h4 class="font-medium text-gray-600 mb-2">Create New Template</h4>
            <p class="text-xs text-gray-500">Build a custom report template</p>
        </div>
    </div>
</div>

<!-- Scheduled Reports -->
<div class="bg-white rounded-lg shadow-sm p-6 mb-8">
    <div class="flex items-center justify-between mb-6">
        <h3 class="text-xl font-semibold text-gray-800">
            <i class="fas fa-calendar-alt text-green-500 mr-2"></i>
            Scheduled Reports & Automation
        </h3>
        <button onclick="addScheduledReport()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm">
            <i class="fas fa-plus mr-2"></i>Add Schedule
        </button>
    </div>

    <div class="overflow-x-auto">
        <table class="w-full text-sm">
            <thead class="bg-gray-50">
                <tr>
                    <th class="text-left p-4 font-medium text-gray-700">Report Name</th>
                    <th class="text-left p-4 font-medium text-gray-700">Schedule</th>
                    <th class="text-left p-4 font-medium text-gray-700">Recipients</th>
                    <th class="text-left p-4 font-medium text-gray-700">Last Run</th>
                    <th class="text-left p-4 font-medium text-gray-700">Next Run</th>
                    <th class="text-center p-4 font-medium text-gray-700">Status</th>
                    <th class="text-center p-4 font-medium text-gray-700">Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr class="border-b border-gray-100 hover:bg-gray-50">
                    <td class="p-4 font-medium">Monthly Financial Summary</td>
                    <td class="p-4 text-gray-600">1st of every month</td>
                    <td class="p-4 text-gray-600">ben@benzenproperties.com</td>
                    <td class="p-4 text-gray-600">{{formatDate currentDate}}</td>
                    <td class="p-4 text-gray-600">December 1, 2024</td>
                    <td class="p-4 text-center">
                        <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Active</span>
                    </td>
                    <td class="p-4 text-center">
                        <div class="flex justify-center space-x-2">
                            <button onclick="editSchedule('monthly-financial')" class="text-blue-600 hover:text-blue-800">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="runNow('monthly-financial')" class="text-green-600 hover:text-green-800">
                                <i class="fas fa-play"></i>
                            </button>
                            <button onclick="pauseSchedule('monthly-financial')" class="text-orange-600 hover:text-orange-800">
                                <i class="fas fa-pause"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                <tr class="border-b border-gray-100 hover:bg-gray-50">
                    <td class="p-4 font-medium">Weekly Manager Performance</td>
                    <td class="p-4 text-gray-600">Every Monday</td>
                    <td class="p-4 text-gray-600">managers@benzenproperties.com</td>
                    <td class="p-4 text-gray-600">November 18, 2024</td>
                    <td class="p-4 text-gray-600">November 25, 2024</td>
                    <td class="p-4 text-center">
                        <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Active</span>
                    </td>
                    <td class="p-4 text-center">
                        <div class="flex justify-center space-x-2">
                            <button onclick="editSchedule('weekly-manager')" class="text-blue-600 hover:text-blue-800">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="runNow('weekly-manager')" class="text-green-600 hover:text-green-800">
                                <i class="fas fa-play"></i>
                            </button>
                            <button onclick="pauseSchedule('weekly-manager')" class="text-orange-600 hover:text-orange-800">
                                <i class="fas fa-pause"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                <tr class="border-b border-gray-100 hover:bg-gray-50">
                    <td class="p-4 font-medium">Quarterly Tax Preparation</td>
                    <td class="p-4 text-gray-600">Quarterly</td>
                    <td class="p-4 text-gray-600">accountant@taxfirm.com</td>
                    <td class="p-4 text-gray-600">October 1, 2024</td>
                    <td class="p-4 text-gray-600">January 1, 2025</td>
                    <td class="p-4 text-center">
                        <span class="px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-full">Paused</span>
                    </td>
                    <td class="p-4 text-center">
                        <div class="flex justify-center space-x-2">
                            <button onclick="editSchedule('quarterly-tax')" class="text-blue-600 hover:text-blue-800">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="runNow('quarterly-tax')" class="text-green-600 hover:text-green-800">
                                <i class="fas fa-play"></i>
                            </button>
                            <button onclick="resumeSchedule('quarterly-tax')" class="text-green-600 hover:text-green-800">
                                <i class="fas fa-play-circle"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- Recent Reports History -->
<div class="bg-white rounded-lg shadow-sm p-6">
    <div class="flex items-center justify-between mb-6">
        <h3 class="text-xl font-semibold text-gray-800">
            <i class="fas fa-history text-gray-500 mr-2"></i>
            Recent Reports History
        </h3>
        <div class="flex items-center space-x-2">
            <button onclick="clearHistory()" class="text-red-600 hover:text-red-800 text-sm">
                <i class="fas fa-trash mr-1"></i>Clear History
            </button>
            <button onclick="archiveReports()" class="text-gray-600 hover:text-gray-800 text-sm">
                <i class="fas fa-archive mr-1"></i>Archive
            </button>
        </div>
    </div>

    <div class="space-y-4">
        <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
            <div class="flex items-center space-x-4">
                <div class="bg-green-100 p-2 rounded-full">
                    <i class="fas fa-chart-line text-green-600"></i>
                </div>
                <div>
                    <h4 class="font-medium text-gray-800">Monthly Financial Report - November 2024</h4>
                    <p class="text-sm text-gray-600">Generated today at 2:30 PM • PDF • 2.4 MB</p>
                </div>
            </div>
            <div class="flex items-center space-x-2">
                <button onclick="downloadHistoryReport('nov-2024-financial')" class="text-blue-600 hover:text-blue-800">
                    <i class="fas fa-download"></i>
                </button>
                <button onclick="shareHistoryReport('nov-2024-financial')" class="text-green-600 hover:text-green-800">
                    <i class="fas fa-share"></i>
                </button>
                <button onclick="deleteHistoryReport('nov-2024-financial')" class="text-red-600 hover:text-red-800">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        </div>

        <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
            <div class="flex items-center space-x-4">
                <div class="bg-blue-100 p-2 rounded-full">
                    <i class="fas fa-users text-blue-600"></i>
                </div>
                <div>
                    <h4 class="font-medium text-gray-800">Manager Performance Report - Q4 2024</h4>
                    <p class="text-sm text-gray-600">Generated yesterday at 9:15 AM • Excel • 1.8 MB</p>
                </div>
            </div>
            <div class="flex items-center space-x-2">
                <button onclick="downloadHistoryReport('q4-2024-manager')" class="text-blue-600 hover:text-blue-800">
                    <i class="fas fa-download"></i>
                </button>
                <button onclick="shareHistoryReport('q4-2024-manager')" class="text-green-600 hover:text-green-800">
                    <i class="fas fa-share"></i>
                </button>
                <button onclick="deleteHistoryReport('q4-2024-manager')" class="text-red-600 hover:text-red-800">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        </div>

        <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
            <div class="flex items-center space-x-4">
                <div class="bg-purple-100 p-2 rounded-full">
                    <i class="fas fa-calculator text-purple-600"></i>
                </div>
                <div>
                    <h4 class="font-medium text-gray-800">Tax Preparation Summary - 2024</h4>
                    <p class="text-sm text-gray-600">Generated 3 days ago at 4:45 PM • PDF • 3.1 MB</p>
                </div>
            </div>
            <div class="flex items-center space-x-2">
                <button onclick="downloadHistoryReport('2024-tax-prep')" class="text-blue-600 hover:text-blue-800">
                    <i class="fas fa-download"></i>
                </button>
                <button onclick="shareHistoryReport('2024-tax-prep')" class="text-green-600 hover:text-green-800">
                    <i class="fas fa-share"></i>
                </button>
                <button onclick="deleteHistoryReport('2024-tax-prep')" class="text-red-600 hover:text-red-800">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        </div>

        <div class="text-center py-4">
            <button onclick="loadMoreHistory()" class="text-blue-600 hover:text-blue-800 text-sm">
                <i class="fas fa-chevron-down mr-1"></i>Load More Reports
            </button>
        </div>
    </div>
</div>

<!-- Report Generation Scripts -->
<script>
// Global report data from server
const reportData = {
    portfolioMetrics: {{{reportData.portfolioMetrics}}},
    managerStats: {{{reportData.managerStats}}},
    monthlyData: {{{reportData.monthlyData}}},
    properties: {{{reportData.properties}}},
    taxData: {{{reportData.taxData}}},
    maintenanceData: {{{reportData.maintenanceData}}}
};

// Initialize date inputs
document.addEventListener('DOMContentLoaded', function() {
    const today = new Date();
    const firstDayOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);

    document.getElementById('startDate').value = firstDayOfMonth.toISOString().split('T')[0];
    document.getElementById('endDate').value = today.toISOString().split('T')[0];
});

// Quick Report Generation Functions
function generateReport(type) {
    showLoadingState();

    setTimeout(() => {
        switch(type) {
            case 'financial':
                generateFinancialReport();
                break;
            case 'manager':
                generateManagerReport();
                break;
            case 'tax':
                generateTaxReport();
                break;
            case 'maintenance':
                generateMaintenanceReport();
                break;
            default:
                generatePortfolioReport();
        }
        hideLoadingState();
        showNotification(`${type.charAt(0).toUpperCase() + type.slice(1)} report generated successfully!`, 'success');
    }, 1500);
}

function generateFinancialReport() {
    const preview = document.getElementById('reportPreview');
    const monthlyData = reportData.monthlyData;
    const portfolioMetrics = reportData.portfolioMetrics;

    preview.innerHTML = `
        <div class="text-left">
            <div class="border-b pb-4 mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Ben Zen Properties LLC</h2>
                <h3 class="text-xl text-gray-600">Monthly Financial Report</h3>
                <p class="text-sm text-gray-500">Generated on ${new Date().toLocaleDateString()}</p>
            </div>

            <div class="grid grid-cols-2 gap-6 mb-6">
                <div>
                    <h4 class="font-semibold text-gray-800 mb-3">Portfolio Summary</h4>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span>Total Properties:</span>
                            <span class="font-medium">${portfolioMetrics.totalProperties}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Monthly Rent Income:</span>
                            <span class="font-medium text-green-600">$${portfolioMetrics.totalRentIncome.toLocaleString()}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Monthly Expenses:</span>
                            <span class="font-medium text-red-600">$${portfolioMetrics.totalExpenses.toLocaleString()}</span>
                        </div>
                        <div class="flex justify-between border-t pt-2">
                            <span class="font-semibold">Net Income:</span>
                            <span class="font-semibold ${portfolioMetrics.totalNetIncome > 0 ? 'text-green-600' : 'text-red-600'}">
                                $${portfolioMetrics.totalNetIncome.toLocaleString()}
                            </span>
                        </div>
                    </div>
                </div>

                <div>
                    <h4 class="font-semibold text-gray-800 mb-3">Key Metrics</h4>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span>Average ROI:</span>
                            <span class="font-medium">${portfolioMetrics.averageROI.toFixed(1)}%</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Total Mortgage Balance:</span>
                            <span class="font-medium">$${portfolioMetrics.totalMortgageBalance.toLocaleString()}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Expense Ratio:</span>
                            <span class="font-medium">${((portfolioMetrics.totalExpenses / portfolioMetrics.totalRentIncome) * 100).toFixed(1)}%</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <h4 class="font-semibold text-gray-800 mb-3">12-Month Trend</h4>
                <div class="bg-gray-50 p-4 rounded">
                    <div class="grid grid-cols-4 gap-2 text-xs text-gray-600 mb-2">
                        <div>Month</div>
                        <div class="text-right">Income</div>
                        <div class="text-right">Expenses</div>
                        <div class="text-right">Net</div>
                    </div>
                    ${monthlyData.slice(-6).map(month => `
                        <div class="grid grid-cols-4 gap-2 text-xs py-1">
                            <div>${month.month}</div>
                            <div class="text-right text-green-600">$${month.income.toLocaleString()}</div>
                            <div class="text-right text-red-600">$${month.expenses.toLocaleString()}</div>
                            <div class="text-right ${month.netIncome > 0 ? 'text-green-600' : 'text-red-600'}">
                                $${month.netIncome.toLocaleString()}
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>
        </div>
    `;
}

function generateManagerReport() {
    const preview = document.getElementById('reportPreview');
    const managerStats = reportData.managerStats;

    preview.innerHTML = `
        <div class="text-left">
            <div class="border-b pb-4 mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Ben Zen Properties LLC</h2>
                <h3 class="text-xl text-gray-600">Manager Performance Report</h3>
                <p class="text-sm text-gray-500">Generated on ${new Date().toLocaleDateString()}</p>
            </div>

            <div class="mb-6">
                <h4 class="font-semibold text-gray-800 mb-3">Performance Rankings</h4>
                <div class="space-y-3">
                    ${managerStats.slice(0, 5).map((manager, index) => `
                        <div class="flex items-center justify-between p-3 ${index === 0 ? 'bg-green-50 border-l-4 border-green-400' :
                            index === 1 ? 'bg-blue-50 border-l-4 border-blue-400' :
                            index === 2 ? 'bg-orange-50 border-l-4 border-orange-400' : 'bg-gray-50'} rounded">
                            <div class="flex items-center space-x-3">
                                <span class="font-bold text-lg ${index === 0 ? 'text-green-600' :
                                    index === 1 ? 'text-blue-600' :
                                    index === 2 ? 'text-orange-600' : 'text-gray-600'}">#${index + 1}</span>
                                <div>
                                    <h5 class="font-medium">${manager.name}</h5>
                                    <p class="text-sm text-gray-600">${manager.propertyCount} properties</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <p class="font-semibold text-lg ${manager.averageROI > 10 ? 'text-green-600' :
                                    manager.averageROI > 5 ? 'text-orange-600' : 'text-red-600'}">${manager.averageROI.toFixed(1)}%</p>
                                <p class="text-sm text-gray-600">Avg ROI</p>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>

            <div class="grid grid-cols-2 gap-6">
                <div>
                    <h4 class="font-semibold text-gray-800 mb-3">Top Performer Details</h4>
                    ${managerStats[0] ? `
                        <div class="bg-green-50 p-4 rounded">
                            <h5 class="font-medium text-green-800">${managerStats[0].name}</h5>
                            <div class="text-sm space-y-1 mt-2">
                                <div class="flex justify-between">
                                    <span>Properties Managed:</span>
                                    <span class="font-medium">${managerStats[0].propertyCount}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Total Income:</span>
                                    <span class="font-medium">$${managerStats[0].totalRentIncome.toLocaleString()}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Efficiency:</span>
                                    <span class="font-medium">${managerStats[0].efficiency.toFixed(1)}%</span>
                                </div>
                            </div>
                        </div>
                    ` : '<p class="text-gray-500">No manager data available</p>'}
                </div>

                <div>
                    <h4 class="font-semibold text-gray-800 mb-3">Performance Summary</h4>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span>Total Managers:</span>
                            <span class="font-medium">${managerStats.length}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Above 10% ROI:</span>
                            <span class="font-medium text-green-600">${managerStats.filter(m => m.averageROI > 10).length}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>5-10% ROI:</span>
                            <span class="font-medium text-orange-600">${managerStats.filter(m => m.averageROI >= 5 && m.averageROI <= 10).length}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Below 5% ROI:</span>
                            <span class="font-medium text-red-600">${managerStats.filter(m => m.averageROI < 5).length}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;
}

function generateTaxReport() {
    const preview = document.getElementById('reportPreview');
    const taxData = reportData.taxData;
    const portfolioMetrics = reportData.portfolioMetrics;

    preview.innerHTML = `
        <div class="text-left">
            <div class="border-b pb-4 mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Ben Zen Properties LLC</h2>
                <h3 class="text-xl text-gray-600">Tax Preparation Report - 2024</h3>
                <p class="text-sm text-gray-500">Generated on ${new Date().toLocaleDateString()}</p>
            </div>

            <div class="grid grid-cols-2 gap-6 mb-6">
                <div>
                    <h4 class="font-semibold text-gray-800 mb-3">Schedule E - Rental Income</h4>
                    <div class="bg-blue-50 p-4 rounded">
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span>Total Rental Income:</span>
                                <span class="font-medium">$${taxData.scheduleEIncome.toLocaleString()}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Total Expenses:</span>
                                <span class="font-medium">$${taxData.scheduleEExpenses.toLocaleString()}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Depreciation:</span>
                                <span class="font-medium">$${taxData.totalDepreciation.toLocaleString()}</span>
                            </div>
                            <div class="flex justify-between border-t pt-2 font-semibold">
                                <span>Net Rental Income:</span>
                                <span class="${taxData.netScheduleE > 0 ? 'text-green-600' : 'text-red-600'}">
                                    $${taxData.netScheduleE.toLocaleString()}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <div>
                    <h4 class="font-semibold text-gray-800 mb-3">Deductible Expenses</h4>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span>Maintenance & Repairs:</span>
                            <span class="font-medium">$${Math.round(taxData.scheduleEExpenses * 0.35).toLocaleString()}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Property Tax:</span>
                            <span class="font-medium">$${Math.round(taxData.scheduleEExpenses * 0.25).toLocaleString()}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Insurance:</span>
                            <span class="font-medium">$${Math.round(taxData.scheduleEExpenses * 0.15).toLocaleString()}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Management Fees:</span>
                            <span class="font-medium">$${Math.round(taxData.scheduleEExpenses * 0.12).toLocaleString()}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Other Expenses:</span>
                            <span class="font-medium">$${Math.round(taxData.scheduleEExpenses * 0.13).toLocaleString()}</span>
                        </div>
                        <div class="flex justify-between border-t pt-2 font-semibold">
                            <span>Total Deductions:</span>
                            <span>$${taxData.totalDeductions.toLocaleString()}</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <h4 class="font-semibold text-gray-800 mb-3">Depreciation Schedule</h4>
                <div class="bg-gray-50 p-4 rounded">
                    <div class="grid grid-cols-3 gap-4 text-sm">
                        <div>
                            <span class="text-gray-600">Annual Depreciation:</span>
                            <p class="font-medium text-lg">$${taxData.totalDepreciation.toLocaleString()}</p>
                        </div>
                        <div>
                            <span class="text-gray-600">Depreciation Method:</span>
                            <p class="font-medium">Straight-line (27.5 years)</p>
                        </div>
                        <div>
                            <span class="text-gray-600">Total Properties:</span>
                            <p class="font-medium">${portfolioMetrics.totalProperties} properties</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4">
                <h5 class="font-medium text-yellow-800 mb-2">Important Tax Notes</h5>
                <ul class="text-sm text-yellow-700 space-y-1">
                    <li>• Consult with a tax professional for final preparation</li>
                    <li>• Keep all receipts and documentation for deductions</li>
                    <li>• Consider depreciation recapture implications for future sales</li>
                    <li>• Review quarterly estimated tax payments based on net income</li>
                </ul>
            </div>
        </div>
    `;
}

function generateMaintenanceReport() {
    const preview = document.getElementById('reportPreview');
    const maintenanceData = reportData.maintenanceData;
    const portfolioMetrics = reportData.portfolioMetrics;

    preview.innerHTML = `
        <div class="text-left">
            <div class="border-b pb-4 mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Ben Zen Properties LLC</h2>
                <h3 class="text-xl text-gray-600">Maintenance Summary Report</h3>
                <p class="text-sm text-gray-500">Generated on ${new Date().toLocaleDateString()}</p>
            </div>

            <div class="grid grid-cols-3 gap-6 mb-6">
                <div class="bg-red-50 p-4 rounded border-l-4 border-red-400">
                    <h4 class="font-semibold text-red-800">Total Maintenance Costs</h4>
                    <p class="text-2xl font-bold text-red-600">$${maintenanceData.totalMaintenanceCost.toLocaleString()}</p>
                    <p class="text-sm text-red-600">${((maintenanceData.totalMaintenanceCost / portfolioMetrics.totalExpenses) * 100).toFixed(1)}% of total expenses</p>
                </div>

                <div class="bg-orange-50 p-4 rounded border-l-4 border-orange-400">
                    <h4 class="font-semibold text-orange-800">Average per Property</h4>
                    <p class="text-2xl font-bold text-orange-600">$${maintenanceData.averagePerProperty.toLocaleString()}</p>
                    <p class="text-sm text-orange-600">Monthly average</p>
                </div>

                <div class="bg-blue-50 p-4 rounded border-l-4 border-blue-400">
                    <h4 class="font-semibold text-blue-800">Properties Monitored</h4>
                    <p class="text-2xl font-bold text-blue-600">${portfolioMetrics.totalProperties}</p>
                    <p class="text-sm text-blue-600">Total portfolio</p>
                </div>
            </div>

            <div class="mb-6">
                <h4 class="font-semibold text-gray-800 mb-3">High Maintenance Properties</h4>
                <div class="space-y-3">
                    ${maintenanceData.highMaintenanceProperties.map((property, index) => `
                        <div class="flex items-center justify-between p-3 bg-red-50 rounded border-l-4 border-red-400">
                            <div>
                                <h5 class="font-medium">${property.address}</h5>
                                <p class="text-sm text-gray-600">Manager: ${property.manager}</p>
                            </div>
                            <div class="text-right">
                                <p class="font-semibold text-red-600">$${(property.total_expenses || 0).toLocaleString()}</p>
                                <p class="text-sm text-gray-600">Monthly expenses</p>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>

            <div class="grid grid-cols-2 gap-6">
                <div>
                    <h4 class="font-semibold text-gray-800 mb-3">Maintenance Categories</h4>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span>HVAC & Plumbing:</span>
                            <span class="font-medium">$${Math.round(maintenanceData.totalMaintenanceCost * 0.4).toLocaleString()}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>General Repairs:</span>
                            <span class="font-medium">$${Math.round(maintenanceData.totalMaintenanceCost * 0.3).toLocaleString()}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Appliances:</span>
                            <span class="font-medium">$${Math.round(maintenanceData.totalMaintenanceCost * 0.15).toLocaleString()}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Landscaping:</span>
                            <span class="font-medium">$${Math.round(maintenanceData.totalMaintenanceCost * 0.1).toLocaleString()}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Emergency Repairs:</span>
                            <span class="font-medium">$${Math.round(maintenanceData.totalMaintenanceCost * 0.05).toLocaleString()}</span>
                        </div>
                    </div>
                </div>

                <div>
                    <h4 class="font-semibold text-gray-800 mb-3">Recommendations</h4>
                    <div class="space-y-2 text-sm">
                        <div class="p-2 bg-green-50 rounded">
                            <span class="text-green-600 font-medium">• Preventive Maintenance:</span>
                            <p class="text-green-700">Schedule quarterly HVAC inspections</p>
                        </div>
                        <div class="p-2 bg-blue-50 rounded">
                            <span class="text-blue-600 font-medium">• Cost Optimization:</span>
                            <p class="text-blue-700">Negotiate bulk service contracts</p>
                        </div>
                        <div class="p-2 bg-orange-50 rounded">
                            <span class="text-orange-600 font-medium">• Priority Properties:</span>
                            <p class="text-orange-700">Focus on top 5 high-cost properties</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;
}

// Custom Report Generation
function generateCustomReport() {
    const reportType = document.getElementById('reportTypeSelect').value;
    const startDate = document.getElementById('startDate').value;
    const endDate = document.getElementById('endDate').value;
    const format = document.querySelector('input[name="exportFormat"]:checked').value;

    showLoadingState();

    setTimeout(() => {
        switch(reportType) {
            case 'portfolio':
                generatePortfolioReport();
                break;
            case 'financial':
                generateFinancialReport();
                break;
            case 'manager':
                generateManagerReport();
                break;
            case 'tax':
                generateTaxReport();
                break;
            case 'maintenance':
                generateMaintenanceReport();
                break;
            default:
                generatePortfolioReport();
        }
        hideLoadingState();
        showNotification(`Custom ${reportType} report generated successfully!`, 'success');
    }, 2000);
}

function generatePortfolioReport() {
    const preview = document.getElementById('reportPreview');
    const portfolioMetrics = reportData.portfolioMetrics;

    preview.innerHTML = `
        <div class="text-left">
            <div class="border-b pb-4 mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Ben Zen Properties LLC</h2>
                <h3 class="text-xl text-gray-600">Portfolio Overview Report</h3>
                <p class="text-sm text-gray-500">Generated on ${new Date().toLocaleDateString()}</p>
            </div>

            <div class="grid grid-cols-2 gap-6 mb-6">
                <div>
                    <h4 class="font-semibold text-gray-800 mb-4">Executive Summary</h4>
                    <div class="space-y-3">
                        <div class="bg-blue-50 p-3 rounded">
                            <span class="text-blue-600 font-medium">Total Properties:</span>
                            <p class="text-xl font-bold text-blue-800">${portfolioMetrics.totalProperties}</p>
                        </div>
                        <div class="bg-green-50 p-3 rounded">
                            <span class="text-green-600 font-medium">Monthly Revenue:</span>
                            <p class="text-xl font-bold text-green-800">$${portfolioMetrics.totalRentIncome.toLocaleString()}</p>
                        </div>
                        <div class="bg-purple-50 p-3 rounded">
                            <span class="text-purple-600 font-medium">Portfolio ROI:</span>
                            <p class="text-xl font-bold text-purple-800">${portfolioMetrics.averageROI.toFixed(1)}%</p>
                        </div>
                    </div>
                </div>

                <div>
                    <h4 class="font-semibold text-gray-800 mb-4">Financial Health</h4>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span>Gross Revenue:</span>
                            <span class="font-medium text-green-600">$${portfolioMetrics.totalRentIncome.toLocaleString()}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Operating Expenses:</span>
                            <span class="font-medium text-red-600">$${portfolioMetrics.totalExpenses.toLocaleString()}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Net Operating Income:</span>
                            <span class="font-medium ${portfolioMetrics.totalNetIncome > 0 ? 'text-green-600' : 'text-red-600'}">
                                $${portfolioMetrics.totalNetIncome.toLocaleString()}
                            </span>
                        </div>
                        <div class="flex justify-between">
                            <span>Total Debt:</span>
                            <span class="font-medium text-orange-600">$${portfolioMetrics.totalMortgageBalance.toLocaleString()}</span>
                        </div>
                        <div class="flex justify-between pt-2 border-t">
                            <span class="font-semibold">Profit Margin:</span>
                            <span class="font-semibold">${((portfolioMetrics.totalNetIncome / portfolioMetrics.totalRentIncome) * 100).toFixed(1)}%</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-lg">
                <h4 class="font-semibold mb-3">Key Performance Indicators</h4>
                <div class="grid grid-cols-3 gap-4 text-center">
                    <div>
                        <p class="text-2xl font-bold">${portfolioMetrics.averageROI.toFixed(1)}%</p>
                        <p class="text-sm opacity-90">Average ROI</p>
                    </div>
                    <div>
                        <p class="text-2xl font-bold">${((portfolioMetrics.totalExpenses / portfolioMetrics.totalRentIncome) * 100).toFixed(0)}%</p>
                        <p class="text-sm opacity-90">Expense Ratio</p>
                    </div>
                    <div>
                        <p class="text-2xl font-bold">$${Math.round(portfolioMetrics.totalRentIncome / portfolioMetrics.totalProperties).toLocaleString()}</p>
                        <p class="text-sm opacity-90">Avg Rent/Property</p>
                    </div>
                </div>
            </div>
        </div>
    `;
}

// Preview and Export Functions
function previewReport() {
    generateCustomReport();
}

function downloadReport() {
    const format = document.querySelector('input[name="exportFormat"]:checked').value;
    const reportType = document.getElementById('reportTypeSelect').value;

    showNotification(`Downloading ${reportType} report as ${format.toUpperCase()}...`, 'info');

    // In a real application, this would trigger actual file download
    setTimeout(() => {
        showNotification(`${reportType.charAt(0).toUpperCase() + reportType.slice(1)} report downloaded successfully!`, 'success');
    }, 1500);
}

function shareReport() {
    showNotification('Opening share options...', 'info');

    // In a real application, this would open a share dialog
    setTimeout(() => {
        showNotification('Share link copied to clipboard!', 'success');
    }, 1000);
}

function printReport() {
    window.print();
}

// Template Management Functions
function loadTemplate(templateId) {
    showNotification(`Loading ${templateId} template...`, 'info');

    // Set appropriate values based on template
    const reportTypeSelect = document.getElementById('reportTypeSelect');
    switch(templateId) {
        case 'monthly-financial':
            reportTypeSelect.value = 'financial';
            break;
        case 'manager-performance':
            reportTypeSelect.value = 'manager';
            break;
        case 'tax-prep':
            reportTypeSelect.value = 'tax';
            break;
        case 'portfolio-summary':
            reportTypeSelect.value = 'portfolio';
            break;
        case 'maintenance-report':
            reportTypeSelect.value = 'maintenance';
            break;
    }

    setTimeout(() => {
        generateCustomReport();
        showNotification('Template loaded and report generated!', 'success');
    }, 1000);
}

function saveTemplate() {
    const templateName = prompt('Enter template name:');
    if (templateName) {
        showNotification(`Template "${templateName}" saved successfully!`, 'success');
    }
}

function createNewTemplate() {
    showNotification('Opening template builder...', 'info');
    // In a real application, this would open a template creation modal
}

function editTemplate(templateId) {
    showNotification(`Opening ${templateId} template editor...`, 'info');
}

function duplicateTemplate(templateId) {
    showNotification(`Template ${templateId} duplicated successfully!`, 'success');
}

// Scheduling Functions
function scheduleReport() {
    showNotification('Opening report scheduler...', 'info');
    // In a real application, this would open a scheduling modal
}

function addScheduledReport() {
    showNotification('Opening new schedule form...', 'info');
}

function editSchedule(scheduleId) {
    showNotification(`Editing ${scheduleId} schedule...`, 'info');
}

function runNow(scheduleId) {
    showNotification(`Running ${scheduleId} report now...`, 'info');
    setTimeout(() => {
        showNotification('Scheduled report completed and sent!', 'success');
    }, 2000);
}

function pauseSchedule(scheduleId) {
    showNotification(`${scheduleId} schedule paused`, 'info');
}

function resumeSchedule(scheduleId) {
    showNotification(`${scheduleId} schedule resumed`, 'success');
}

// Export and History Functions
function exportAllReports() {
    showNotification('Preparing bulk export...', 'info');
    setTimeout(() => {
        showNotification('All reports exported successfully!', 'success');
    }, 3000);
}

function downloadHistoryReport(reportId) {
    showNotification(`Downloading ${reportId}...`, 'info');
}

function shareHistoryReport(reportId) {
    showNotification(`Sharing ${reportId}...`, 'info');
}

function deleteHistoryReport(reportId) {
    if (confirm('Are you sure you want to delete this report?')) {
        showNotification(`Report ${reportId} deleted`, 'success');
    }
}

function clearHistory() {
    if (confirm('Are you sure you want to clear all report history?')) {
        showNotification('Report history cleared', 'success');
    }
}

function archiveReports() {
    showNotification('Archiving old reports...', 'info');
    setTimeout(() => {
        showNotification('Reports archived successfully!', 'success');
    }, 2000);
}

function loadMoreHistory() {
    showNotification('Loading more reports...', 'info');
}

// Utility Functions
function showLoadingState() {
    const preview = document.getElementById('reportPreview');
    preview.innerHTML = `
        <div class="flex items-center justify-center py-12">
            <div class="text-center">
                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
                <p class="text-gray-600">Generating report...</p>
            </div>
        </div>
    `;
}

function hideLoadingState() {
    // Loading state will be replaced by the actual report content
}

function showNotification(message, type) {
    const notification = document.createElement('div');
    notification.className = `fixed top-4 right-4 z-50 p-4 rounded-lg text-white ${
        type === 'success' ? 'bg-green-600' :
        type === 'info' ? 'bg-blue-600' : 'bg-red-600'
    } transform transition-transform duration-300 translate-x-full`;

    notification.innerHTML = `
        <div class="flex items-center space-x-2">
            <i class="fas fa-${type === 'success' ? 'check' : type === 'info' ? 'info-circle' : 'exclamation-triangle'}"></i>
            <span>${message}</span>
        </div>
    `;

    document.body.appendChild(notification);

    // Slide in
    setTimeout(() => {
        notification.classList.remove('translate-x-full');
    }, 100);

    // Slide out after 3 seconds
    setTimeout(() => {
        notification.classList.add('translate-x-full');
        setTimeout(() => {
            if (document.body.contains(notification)) {
                document.body.removeChild(notification);
            }
        }, 300);
    }, 3000);
}

// Initialize report period functionality
document.getElementById('reportPeriod').addEventListener('change', function() {
    const period = this.value;
    const startDate = document.getElementById('startDate');
    const endDate = document.getElementById('endDate');
    const today = new Date();

    switch(period) {
        case 'current':
            startDate.value = new Date(today.getFullYear(), today.getMonth(), 1).toISOString().split('T')[0];
            endDate.value = today.toISOString().split('T')[0];
            break;
        case 'ytd':
            startDate.value = new Date(today.getFullYear(), 0, 1).toISOString().split('T')[0];
            endDate.value = today.toISOString().split('T')[0];
            break;
        case 'last12':
            startDate.value = new Date(today.getFullYear() - 1, today.getMonth(), today.getDate()).toISOString().split('T')[0];
            endDate.value = today.toISOString().split('T')[0];
            break;
    }

    showNotification(`Date range updated for ${period}`, 'info');
});
</script>